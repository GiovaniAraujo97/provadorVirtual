<div class="cart-container">
  <header class="cart-header">
    <h1>🛒 Seu Carrinho</h1>
    <p class="cart-summary">{{ itemCount() }} {{ itemCount() === 1 ? 'item' : 'itens' }} no carrinho</p>
  </header>

  <div class="cart-content" *ngIf="itemCount() > 0; else emptyCart">
    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of items()">
        <div class="item-image">
          <img [src]="item.image" [alt]="item.name" (error)="$any($event.target).src='https://via.placeholder.com/150x200/f8f9fa/6c757d?text=Imagem+Não+Encontrada'">
        </div>
        
        <div class="item-details">
          <h3>{{ item.name }}</h3>
          <p class="item-category">{{ item.category }}</p>
          <div class="item-options" *ngIf="item.size || item.color">
            <span *ngIf="item.size" class="size-badge">Tamanho: {{ item.size }}</span>
            <span *ngIf="item.color" class="color-badge">Cor: {{ item.color }}</span>
          </div>
          <p class="item-price">{{ formatPrice(item.price) }}</p>
        </div>
        
        <div class="item-controls">
          <div class="quantity-controls">
            <button class="btn btn-quantity" (click)="updateQuantity(item.id, item.quantity - 1, item.size, item.color)">-</button>
            <span class="quantity">{{ item.quantity }}</span>
            <button class="btn btn-quantity" (click)="updateQuantity(item.id, item.quantity + 1, item.size, item.color)">+</button>
          </div>
          
          <button class="btn btn-remove" (click)="removeItem(item.id, item.size, item.color)">
            🗑️ Remover
          </button>
        </div>
        
        <div class="item-total">
          {{ formatPrice(item.price * item.quantity) }}
        </div>
      </div>
    </div>
    
    <div class="cart-summary-section">
      <div class="summary-card">
        <h3>Resumo do Pedido</h3>
        <div class="summary-line">
          <span>Subtotal ({{ itemCount() }} {{ itemCount() === 1 ? 'item' : 'itens' }}):</span>
          <span class="summary-price">{{ formatPrice(totalPrice()) }}</span>
        </div>
        <div class="summary-line">
          <span>Frete:</span>
          <span class="summary-price">Grátis</span>
        </div>
        <div class="summary-line total-line">
          <span><strong>Total:</strong></span>
          <span class="summary-price"><strong>{{ formatPrice(totalPrice()) }}</strong></span>
        </div>
        
        <div class="cart-actions">
          <button class="btn btn-secondary" (click)="continueShopping()">
            ← Continuar Comprando
          </button>
          <button class="btn btn-primary" (click)="proceedToCheckout()">
            📱 Finalizar no WhatsApp
          </button>
        </div>
        
        <button class="btn btn-clear" (click)="clearCart()">
          🗑️ Limpar Carrinho
        </button>
      </div>
    </div>
  </div>

  <ng-template #emptyCart>
    <div class="empty-cart">
      <div class="empty-cart-content">
        <h2>🛒 Seu carrinho está vazio</h2>
        <p>Que tal explorar nosso catálogo e encontrar peças incríveis?</p>
        <button class="btn btn-primary" (click)="continueShopping()">
          🛍️ Ir às Compras
        </button>
      </div>
    </div>
  </ng-template>
</div>