import{K as d,a as c,b as m,ga as g,gb as i}from"./chunk-Q3HBAGOL.js";var l=class n{cartItems=g([]);items=i(()=>this.cartItems());itemCount=i(()=>this.cartItems().reduce((r,t)=>r+t.quantity,0));totalPrice=i(()=>this.cartItems().reduce((r,t)=>r+t.price*t.quantity,0));constructor(){let r=localStorage.getItem("styleVisionCart");if(r)try{let t=JSON.parse(r);this.cartItems.set(t)}catch(t){console.error("Erro ao carregar carrinho do localStorage:",t)}}addToCart(r){let t=this.cartItems(),s=t.findIndex(e=>e.id===r.id&&e.size===r.size&&e.color===r.color);if(s>=0){let e=[...t];e[s].quantity+=1,this.cartItems.set(e)}else{let e=m(c({},r),{quantity:1});this.cartItems.set([...t,e])}this.saveToLocalStorage(),console.log("Item adicionado ao carrinho:",r.name)}removeFromCart(r,t,s){let I=this.cartItems().filter(a=>!(a.id===r&&a.size===t&&a.color===s));this.cartItems.set(I),this.saveToLocalStorage()}updateQuantity(r,t,s,e){if(t<=0){this.removeFromCart(r,s,e);return}let a=this.cartItems().map(o=>o.id===r&&o.size===s&&o.color===e?m(c({},o),{quantity:t}):o);this.cartItems.set(a),this.saveToLocalStorage()}clearCart(){this.cartItems.set([]),this.saveToLocalStorage()}isInCart(r,t,s){return this.cartItems().some(e=>e.id===r&&e.size===t&&e.color===s)}saveToLocalStorage(){localStorage.setItem("styleVisionCart",JSON.stringify(this.cartItems()))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};export{l as a};
